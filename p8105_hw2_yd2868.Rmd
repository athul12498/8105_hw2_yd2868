---
title: "test"
output: html_document
date: "2025-09-30"
---

Load needed packs and data.
```{r}
library(readxl)
library(tidyverse)
```

# problem1
import needed data
```{r}
pols_df = 
  read.csv("./fivethirtyeight_datasets/pols-month.csv")|>
  janitor::clean_names()

unemploy_df =
  read.csv("./fivethirtyeight_datasets/unemployment.csv")|>
  janitor::clean_names()

snp_df = 
  read.csv("./fivethirtyeight_datasets/snp.csv")|>
  janitor::clean_names()
```

process data 
```{r}
pols_clean_df = 
  pols_df|>
  separate(mon, into = c("year","month","day"), sep ="-")|>
  mutate (month = recode(month,
    `01` = "January",
    `02` = "February",
    `03` = "March",
    `04` = "April",
    `05` = "May",
    `06` = "June",
    `07` = "July",
    `08` = "August",
    `09` = "September",
    `10` = "October",
    `11` = "November",
    `12` = "December" ),
    president = case_when(
    prez_gop == 1 ~ "gop",
    prez_dem == 1 ~ "dem"
   ))|>
   select(-c("day","prez_gop","prez_dem"))

snp_clean_df =
  snp_df|>
  separate(date, into = c("month","day","year"), sep ="/")|>
  select(c("year","month","close"))|>
  mutate (month = recode(month,
    `1` = "January",
    `2` = "February",
    `3` = "March",
    `4` = "April",
    `5` = "May",
    `6` = "June",
    `7` = "July",
    `8` = "August",
    `9` = "September",
    `10` = "October",
    `11` = "November",
    `12` = "December" ),
    year = as.numeric(year),
    year = ifelse(year < 50, year + 2000, year + 1900),
    year = as.character(year)
    )

unemploy_clean_df =
  unemploy_df|>
  pivot_longer(jan:dec, 
             names_to = "month", 
             values_to = "unemploy"
             )|>
  mutate(month = recode(month,
    "jan" = "January",
    "feb" = "February",
    "mar" = "March",
    "apr" = "April",
    "may" = "May",
    "jun" = "June",
    "jul" = "July",
    "aug" = "August",
    "sep" = "September",
    "oct" = "October",
    "nov" = "November",
    "dec" = "December"),
    year = as.character(year)
    )
```

join datas
```{r}
join_df = 
  left_join(pols_clean_df, snp_clean_df, by = c("year", "month") )|>
  left_join(unemploy_clean_df, by = c("year", "month"))
```

The pols dataset contains monthly political data, the snp dataset provides monthly S&P 500 closing values, and the unemployment dataset records monthly unemployment rates. All three datasets include year and month variables, which allow them to be merged into a single dataset that combines political, economic, and employment information for each month and year.

#problem2
import and clean data
```{r}
MR_trashW_df = 
  read_excel("./202509 Trash Wheel Collection Data.xlsx", 
             sheet = "Mr. Trash Wheel",
             range = "A2:N709",
             na = c(".","NA",""))|>
  janitor::clean_names()|>
  select(-c(homes_powered))|>
  mutate(
    sports_balls = as.integer(round(sports_balls))
  )

Pro_trashW_df = 
  read_excel("./202509 Trash Wheel Collection Data.xlsx", 
             sheet = "Professor Trash Wheel",
             range = "A2:M134",
             na = c(".","NA",""))|>
  janitor::clean_names()|>
  select(-c(homes_powered))
  

Gwy_trashW_df = 
  read_excel("./202509 Trash Wheel Collection Data.xlsx", 
             sheet = "Gwynns Falls Trash Wheel",
             range = "A2:L351",
             na = c(".","NA",""))|>
  janitor::clean_names()|>
  select(-c(homes_powered))
```

join all three dataset
```{r}
Gwy_trashW_df = mutate(Gwy_trashW_df,Wheel = "Gwynns",
       year = as.double(year))
Pro_trashW_df = mutate(Pro_trashW_df,Wheel = "Professor",
       year = as.double(year))
MR_trashW_df = mutate(MR_trashW_df,Wheel = "MR",
       year = as.double(year))
trashW_df = bind_rows(MR_trashW_df,Pro_trashW_df,Gwy_trashW_df)
```

There is a total of `r nrow(trashW_df)` observations for these three wheels. It contains weight, volume for each dumpsters and number of certain kind of trash such as plastic bottles, polystyrene, cigarette butts, glass bottles, plastic bags, wrappers, sports_balls. For example, the total weight of trash collected by Professor Trash Wheel is `r sum(select(filter(trashW_df, Wheel == "Professor"), weight_tons))` tons, and the total number of cigarette butts collected by Gwynnda in June of 2022 is`r  format(sum(select(filter(trashW_df, Wheel == "Gwynns", month == "June", year == "2022"), cigarette_butts)))`.
